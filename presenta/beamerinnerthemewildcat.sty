\mode<presentation>

\newcommand{\bgpattern}{
  \draw[color=primary!90,fill=primary!90, line width=0.05pt] (0,0) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- cycle;
  \draw[color=primary!70,fill=primary!70, line width=0.05pt] (0,\the\paperheight) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,\the\paperheight) -- cycle;
  \draw[color=primary!110,fill=primary!110, line width=0.05pt] (6.4,\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- (7.7,0) -- (13.2,0.82*\the\paperheight) -- (12.8,\the\paperheight) -- cycle;
  \draw[color=primary!130,fill=primary!130, line width=0.05pt] (7.7,0) -- (13.2,0.82*\the\paperheight) -- (11.6,0) -- cycle;
  \draw[color=primary!90,fill=primary!90, line width=0.05pt] (11.6,0) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,0.18*\the\paperheight) -- (12,0) -- cycle;
  \draw[color=primary!60,fill=primary!60, line width=0.05pt] (12,0) -- (\the\paperwidth,0.18*\the\paperheight) -- (\the\paperwidth,0) -- cycle;
  \draw[color=primary!60,fill=primary!60,  line width=0.05pt] (12.8,\the\paperheight) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,\the\paperheight) -- cycle;
}

% Make a light version for section pages
\newcommand{\bgpatternlight}{
  \draw[color=secondary!40,fill=secondary!40, line width=0.05pt] (0,0) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- cycle;
  \draw[color=secondary!60,fill=secondary!60, line width=0.05pt] (0,\the\paperheight) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,\the\paperheight) -- cycle;
  \draw[color=secondary!80,fill=secondary!80, line width=0.05pt] (6.4,\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- (7.7,0) -- (13.2,0.82*\the\paperheight) -- (12.8,\the\paperheight) -- cycle;
  \draw[color=secondary!100,fill=secondary!100, line width=0.05pt] (7.7,0) -- (13.2,0.82*\the\paperheight) -- (11.6,0) -- cycle;
  \draw[color=secondary!60,fill=secondary!60, line width=0.05pt] (11.6,0) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,0.18*\the\paperheight) -- (12,0) -- cycle;
  \draw[color=secondary!40,fill=secondary!40, line width=0.05pt] (12,0) -- (\the\paperwidth,0.18*\the\paperheight) -- (\the\paperwidth,0) -- cycle;
  \draw[color=secondary!40,fill=secondary!40,  line width=0.05pt] (12.8,\the\paperheight) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,\the\paperheight) -- cycle;
}

% Make a color-specific version for tblocks that aren't purple. This accepts one
% argument, the color.
\newcommand{\bgpatternblock}[1]{
  \draw[color=#1,fill=#1, line width=0.05pt] (0,0) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- cycle;
  \draw[color=#1!110,fill=#1!110,, line width=0.05pt] (0,\the\paperheight) -- (0,0.9*\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,\the\paperheight) -- cycle;
  \draw[color=#1!120,fill=#1!120, line width=0.05pt] (6.4,\the\paperheight) -- (4.4,0.75*\the\paperheight) -- (6.4,0) -- (7.7,0) -- (13.2,0.82*\the\paperheight) -- (12.8,\the\paperheight) -- cycle;
  \draw[color=#1!130,fill=#1!130, line width=0.05pt] (7.7,0) -- (13.2,0.82*\the\paperheight) -- (11.6,0) -- cycle;
  \draw[color=#1!110,fill=#1!110, line width=0.05pt] (11.6,0) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,0.18*\the\paperheight) -- (12,0) -- cycle;
  \draw[color=#1,fill=#1, line width=0.05pt] (12,0) -- (\the\paperwidth,0.18*\the\paperheight) -- (\the\paperwidth,0) -- cycle;
  \draw[color=#1,fill=#1,  line width=0.05pt] (12.8,\the\paperheight) -- (13.2,0.82*\the\paperheight) -- (\the\paperwidth,0.55*\the\paperheight) -- (\the\paperwidth,\the\paperheight) -- cycle;
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set the background template
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setbeamertemplate{background}{
    \begin{tikzpicture}
    \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    % Add main pattern only on the cover page
    \ifnum\thepage=1
      \bgpattern
      % Add the logo if \titlegraphic is not blank
      \ifx\inserttitlegraphic\@empty\relax
      \else
        \node[anchor=west,inner sep=0] at (0.05*\the\paperwidth,0.89*\the\paperheight) {\inserttitlegraphic};
      \fi
    \else
      % Plain white background for every other page
      \fill[white,opacity=1] (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \fi
    % If the frame specifies [plain] as an option, draw a full white background
    \ifbeamer@plainframe
      \fill[white,opacity=1] (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \fi
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set the title page text positioning
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{title page}{wildcat}[1][]
{ 
% Clear the headline/footline template
\setbeamertemplate{headline}{} 
\setbeamertemplate{footline}{}
\setbeamertemplate{navigation symbols}{}   
\vfill
\vskip4cm%
    \begin{beamercolorbox}[wd=12cm,leftskip=0cm,sep=8pt,#1]{title page header}
        \raggedright\usebeamerfont{title}\inserttitle\par%
    \end{beamercolorbox}%
    \vskip0.75cm%
    \begin{beamercolorbox}[wd=12cm,leftskip=0cm,#1]{author}
        \raggedright\usebeamerfont{author}\insertauthor%
    \end{beamercolorbox}
     \vskip0.2cm%
    \begin{beamercolorbox}[wd=12cm,leftskip=0cm,#1]{date}
        \raggedright\usebeamerfont{author}\insertdate%
    \end{beamercolorbox}
\vfill
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Generate a section page whenever \section{} is called
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\AtBeginSection[]{
  {\setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \bgpatternlight
    \end{tikzpicture}
  }
  \setbeamertemplate{headline}{} % Remove header
  \setbeamertemplate{footline}{} % Remove footer
  \begin{frame}
    \begin{beamercolorbox}[center,shadow=true,rounded=true]{title}
      {\color{primarytitle}\usebeamerfont{section}
        \begin{center}
          \vspace{1cm}
          \insertsectionhead
        \end{center}
      }%
    \end{beamercolorbox}
  \end{frame}
  }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Create special blocks for alerts, examples, and facets
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% If you want the facet design to come through faintly in the interior, replace the fill
% color of the overlay to \fill[white, fill opacity=0.8]
\newtcolorbox{tblock}[1]{
  enhanced,
  underlay={
    \begin{tcbclipframe}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \bgpattern  
      \end{tcbclipframe}
  },
  overlay={
    \begin{tcbclipinterior}
      \fill[primary] (frame.south west) rectangle (frame.north east);
    \end{tcbclipinterior}
  },
  title=#1
}

\newtcolorbox{talert}[1]{
  enhanced,
  underlay={
    \begin{tcbclipframe}
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \bgpatternblock{red}
    \end{tcbclipframe}
  },
  overlay={
    \begin{tcbclipinterior}
      \fill[lightred] (frame.south west) rectangle (frame.north east);
    \end{tcbclipinterior}
  },
  title=#1
}

\newtcolorbox{texample}[1]{
  enhanced,
  underlay={
    \begin{tcbclipframe}
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \bgpatternblock{blue}
    \end{tcbclipframe}
  },
  overlay={
    \begin{tcbclipinterior}
      \fill[lightblue] (frame.south west) rectangle (frame.north east);
    \end{tcbclipinterior}
  },
  title=#1
}

% And a general facet block which takes a second (optional) argument for the color
\newtcolorbox{tfacetbox}[1]{
  enhanced,
  underlay={
    \begin{tcbclipframe}
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \bgpatternblock{primary}
      \end{tcbclipframe}
  },
  overlay={
    \begin{tcbclipinterior}
      \fill[secondary] (frame.south west) rectangle (frame.north east);
    \end{tcbclipinterior}
  },
  title=#1
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Standout Frame
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Create a standout frame for important points. It should be blank, with the body 
% text centered vertically and horizontally. There should be no title
\newcommand{\standout}[1]{
    {
        \setbeamertemplate{background}{
            \begin{tikzpicture}
              \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
                \bgpattern
            \end{tikzpicture}
        }
        \setbeamertemplate{footline}{}
        \begin{frame}
          \begin{beamercolorbox}[center,shadow=true,rounded=true]{title}
            {\color{white}\usebeamerfont{section}
              \begin{center}
                \vspace{1cm}
                #1
              \end{center}
            }            
          \end{beamercolorbox}
        \end{frame}
    }
}



\mode
<all>
