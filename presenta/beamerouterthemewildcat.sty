\mode<all>
\mode<presentation>

% Ensure hyperref package is included
\usepackage{hyperref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set the frame title and footer
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Frame title
\defbeamertemplate*{frametitle}{texsx}[1][]
{
  \settowidth{\@tempdimb}{\insertframetitle}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=1.2cm]{frametitle} 
  \begin{tikzpicture}
    \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \ifx\insertframesubtitle\@empty%
      {
        \node[anchor=west, frametitle.fg,font=\Large] at (0.05*\the\paperwidth,0.61){\raggedright\insertframetitle};
        \draw[line width=1pt, primary] (0.06*\the\paperwidth,0.31) -- (\@tempdimb+50pt,0.31);
      }
    \else%
      {
        \node[anchor=west, frametitle.fg,font=\large] at (0.05*\the\paperwidth,0.81){\raggedright\insertframetitle};%
        \node[anchor=west, frametitle.fg,font=\small] at (0.05*\the\paperwidth,0.41){\raggedright\insertframesubtitle};
        \draw[line width=1pt, primary] (0.06*\the\paperwidth,0.11) -- (\@tempdimb+50pt,0.31);
      }%
    \fi
  \end{tikzpicture}
  \end{beamercolorbox}
}

% Footer (Pages)
\setbeamertemplate{footline}{
  \ifnum\thepage>1
    \begin{beamercolorbox}[wd=\paperwidth,ht=-2.5ex,dp=1.125ex,right]{page number in head/foot}
      \usebeamerfont{page number in head/foot}%
      \color{gray}
      \the\numexpr\insertframenumber-1\relax/\the\numexpr\inserttotalframenumber-1\relax
      \hspace{1em} % Add some space to the right margin
    \end{beamercolorbox}
  \fi
}

\mode<all>
